<header id="about-me">
    <img id="profile-picture" src="img/profile.png" property="schema:image foaf:img">
    <div id="name-contact">
        <h1 property="schema:name foaf:name"><%= @item[:name] %></h1>
        <div class="contact-items">
            <% @item[:links].each do |link| %>
                <%= contact_point link %>
            <% end %>
        </div>
    </div>
</header>

<main>
    <section id="page1" class="page">
        <section id="education" class="half-block">
            <% if @item[:description] %>
              <h2>Me</h2>
              <p>
                <%= @item[:description] %>
              </p>
            <% end %>

            <h2>Education</h2>
            <ul id="education-timeline">
                <li>
                    <span class="education-year">Now</span>
                </li>
                <% @item[:education].each do |education| %>
                <li property="cv:hasEducation" typeof="cv:Education">
                    <span hidden property="cv:degreeType" href="<%= edu_type education %>">
                        <%= education[:type] %>
                    </span>
                    <a class="education-school" property="cv:studiedIn" href="<%= education[:uri] %>" typeof="cv:EducationalOrg">
                        <span about="<%= education[:uri] %>" property="foaf:name schema:name">
                            <%= education[:school] %>
                        </span>
                    </a>
                    <span class="education-field" property="cv:eduDescription"><%= education[:field] %></span>
                    <span class="education-year" property="cv:eduStartDate"><%= education[:started] %></span>
                    <% if education[:ended] %>
                    <span hidden property="cv:eduGradDate"><%= education[:ended] %></span>
                    <% end %>
                </li>
                <% end %>
            </ul>
        </section>

        <section id="skills" class="half-block">
            <h2>Skills</h2>
            <h3>Programming Languages</h3>
            <ul>
            <% @item[:programminglanguages].each do |quality| %>
                <li marker="<%= quality[:quality] %>" class="listify">
                    <%# This is an ugly mess to remove whitespaces %>
                    <%- quality[:languages].each do |language| -%>
                        <span rel="cv:hasSkill" typeof="cv:Skill"><span property="cv:skillName"><%= language %></span><span hidden property="cv:skillLevel"><%= quality[:quality] %></span></span>
                    <%- end -%>
                </li>
            <% end %>
            </ul>

            <h3>Tool experience</h3>
            <ul>
            <% @item[:tools].each do |tool| %>
                <li marker="<%= tool[:group] %>" rel="cv:hasSkill" typeof="cv:Skill" class="listify">
                    <%- tool[:names].each do |name| -%>
                        <span rel="cv:hasSkill" typeof="cv:Skill"><span property="cv:skillName"><%= name %></span></span>
                    <%- end -%>
                </li>
            <% end %>
            </ul>

            <h3>Languages</h3>
            <ul>
            <% @item[:languages].each do |quality| %>
                <%# TODO: model using cv:LanguageSkill %>
                <%# (uses different levels for reading/writing) %>
                <li marker="<%= quality[:language] %>" rel="cv:hasSkill" typeof="cv:Skill">
                    <span property="cv:skillLevel"><%= quality[:quality] %></span>
                    <span hidden property="cv:skillName"><%= quality[:language] %></span>
                </li>
            <% end %>
            </ul>
        </section>
        
        <% if @item[:projects].length > 0 %>
        <section id="projects" class="full-block">
            <h2>Project Highlights</h2>
            <div id="project-list">
                <%# TODO: Distinguish between project & source code? %>
                <% @item[:projects].each do |project| %>
                <div class="project" rev="schema:creator" property="foaf:currentProject" typeof="schema:SoftwareSourceCode" resource="<%= project[:uri] %>">
                    <h3><a property="schema:codeRepository" href="<%= project[:uri] %>">
                        <i class="icon fa-brands fa-github"></i>
                        <span property="schema:name"><%= project[:name] %></span>
                    </a></h3>
                    <div class="project-description" property="schema:description">
                        <%= project[:description] %>
                    </div>
                    <% project[:languages].each do |language| %>
                        <span class="project-language" property="schema:programmingLanguage"><%= language %></span>
                    <% end %>
                </div>
                <% end %>
            </div>
        </section>
        <% end %>
    </section>

    <section id="page2" class="page">
        <% if @item[:work].length > 0 %>
        <section id="work-experience" class="half-block">
            <h2>Work experience</h2>
            <% @item[:work].each do |org| %>
                <div rel="cv:hasWorkHistory" typeof="cv:WorkHistory">
                    <h3>
                        <span property="cv:jobTitle"><%= org[:function] %></span> at
                        <a href="<%= org[:uri] %>" property="cv:employedIn" typeof="cv:Company">
                            <span property="schema:name foaf:name"><%= org[:name] %></span>
                        </a>
                        (<span property="cv:startDate"><%= org[:started] %></span> -
                        <% if org[:ended] %>
                            <span property="cv:endDate"><%= org[:ended] %></span>)
                        <% else %>
                            now)
                        <% end %>
                    </h3>
                    <p property="cv:jobDescription">
                        <%= org[:description] %>
                    </p>
                </div>
            <% end %>
        </section>
        <% end %>
    </section>
    <section id="page2" class="page">
        <section id="volunteer-work" class="half-block">
            <h2>Volunteer Work</h2>
            <% @item[:volunteering].each do |org| %>
                <div rel="cv:hasWorkHistory" typeof="cv:WorkHistory">
                    <h3>
                        <span property="cv:jobTitle"><%= org[:function] %></span> at
                        <a href="<%= org[:uri] %>" property="cv:employedIn" typeof="cv:Company">
                            <span property="schema:name foaf:name"><%= org[:name] %></span>
                        </a>
                        (<span property="cv:startDate"><%= org[:started] %></span> -
                        <% if org[:ended] %>
                            <span property="cv:endDate"><%= org[:ended] %></span>)
                        <% else %>
                            now)
                        <% end %>
                    </h3>
                    <p property="cv:jobDescription">
                        <%= org[:description] %>
                    </p>
                </div>
            <% end %>
        </section>

        <section id="achievements" class="half-block">
            <h2>Achievements</h2>
            <% @item[:achievements].each do |achievement| %>
                <div rel="schema:hasCredential" typeof="schema:EducationalOccupationalCredential">
                    <h3 property="schema:name"><%= achievement[:name] %></h3>
                    <p property="schema:description">
                        <%= achievement[:description] %>
                    </p>
                </div>
            <% end %>
        </section>
    </section>
</main>
